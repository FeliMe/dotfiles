{{- $extensions := list -}}

{{- $extensions = list
    "charliermarsh.ruff"
    "christian-kohler.path-intellisense"
    "davidanson.vscode-markdownlint"
    "donjayamanne.githistory"
    "eamodio.gitlens"
    "github.copilot"
    "github.copilot-chat"
    "github.vscode-github-actions"
    "github.vscode-pull-request-github"
    "ms-python.debugpy"
    "ms-python.python"
    "ms-vscode.remote-explorer"
    "ms-vscode-remote.remote-ssh"
    "ms-vscode-remote.remote-ssh-edit"
    "ms-vscode.makefile-tools"
    "ms-vscode.remote-explorer"
    "yzane.markdown-pdf"
    "yzhang.markdown-all-in-one" -}}

{{- if eq .chezmoi.os "windows" -}}
  {{- $extensions = append $extensions "ms-vscode.powershell" -}}
  {{- $extensions = append $extensions "ms-vscode-remote.remote-wsl" -}}
{{- end -}}

#!/bin/bash

set -eufo pipefail

if command -v code &>/dev/null; then
  {{- range $extensions }}
  code --force --install-extension {{ . }}
  {{- end }}
else
  echo "'code' command not found; skipping extension installation." >&2
fi
